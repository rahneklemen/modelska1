% f = -[20; 10; 15];
% A =  [3 2 5;
%       2 1 1;
%       1 1 3;
%       5 2 4];
% b = [55; 26; 30; 57];
% lb = zeros(5,1);
% 
% [x,fval,exitflag,output,lambda] = linprog(f,A,b,[],[],lb);
% disp(x);
% disp(A(2,:));
% pogoj1=A(4,:)*x;
% max=-f'*x;

enke=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];
test_lb=zeros(23,1);


test_A1=[6.1,64,15.,0.054,0.0047;0.17,13.81,0.26,0.006,0.00012;12,21.55,1.96,0.005,0.00035;20,0,17.17,0.018,0.00194;17.99,0,17.18,0.015,0.00105;3.25,4.52,3.22,0.113,0.00005;27.8,1.43,24.9900000000000 0.731000000000000 0.000440000000000000;3.64000000000000 47.5100000000000 10.9100000000000 0.142000000000000 0.00346000000000000;3.35000000000000 41.2900000000000 12.9500000000000 0.107000000000000 0.00243000000000000;81.1100000000000 0.0600000000000000 0.850000000000000 0.0240000000000000 2.00000000000000e-05;25.1000000000000 0 18.5000000000000 0.0660000000000000 0.00140000000000000;0.210000000000000 28.5900000000000 2.38000000000000 0.00300000000000000 0.00149000000000000;33 55 9 0.220000000000000 0.00400000000000000;0.540000000000000 23.7100000000000 8.86000000000000 0.0270000000000000 0.00210000000000000;0 8 2 0.0160000000000000 0.000790000000000000;0.200000000000000 3.35000000000000 1.25000000000000 0.0520000000000000 0.000830000000000000;0.100000000000000 5.80000000000000 1.28000000000000 0.0400000000000000 0.000470000000000000;0 3.55000000000000 0.460000000000000 0.00400000000000000 2.00000000000000e-05;0 18 1 0.0100000000000000 0.000400000000000000;0.300000000000000 7.68000000000000 0.670000000000000 0.0160000000000000 0.000410000000000000;15.3100000000000 0.880000000000000 13.6300000000000 0.0590000000000000 0.00198000000000000;0.540000000000000 26.5400000000000 5.33000000000000 0.0150000000000000 0.00106000000000000;16 60 4 0.116000000000000 0.00360000000000000;]';
test_A=[test_A1;enke];

test_b=-[70;310;50;1;0.018;-20];
test_f=-[369;52;93;254;236;60;357;266;247;717;305;130;563;132;37;17;25;43;69;32;196;124;399];


v=linprog(test_f,test_A,test_b,[],[],[],test_lb);

masa=sum(v);
%disp(v)
fprintf('-----------1.naloga-----------------------\nmasa:%f',masa);

min=test_f'*v;
fprintf('\nZauzite kalorije:\t %f\n',min);

mascobe=test_A(1,:)*v;
fprintf('1.stoplec-mascob:\t%f\n',mascobe);

mascobe=test_A(2,:)*v;
fprintf('2.stoplec-co:\t%f\n',mascobe);

mascobe=test_A(3,:)*v;
fprintf('proteini:\t%f\n',mascobe);

mascobe=test_A(4,:)*v;
fprintf('kalcij:\t%f\n',mascobe);

mascobe=test_A(5,:)*v;
fprintf('zelezo:\t%f\n',mascobe);

masa=test_A(6,:)*v;
fprintf('masa, pogoj:\t%f\n',masa);

%70 g mascob, 310 g ogljikovih hidratov, 50 g proteinov, 1000 mg kalcija ter 18 mg zeleza.


%------------------------------2naloga--------------------------

lb=zeros(23,1);
B65=[369 52 93 254 236 60 357 266 247 717 305 130 563 132 37 17 25 43 69 32 196 124 399;64 13.8100000000000 21.5500000000000 0 0 4.52000000000000 1.43000000000000 47.5100000000000 41.2900000000000 0.0600000000000000 0 28.5900000000000 55 23.7100000000000 8 3.35000000000000 5.80000000000000 3.55000000000000 18 7.68000000000000 0.880000000000000 26.5400000000000 60;15.5000000000000 0.260000000000000 1.96000000000000 17.1700000000000 17.1800000000000 3.22000000000000 24.9900000000000 10.9100000000000 12.9500000000000 0.850000000000000 18.5000000000000 2.38000000000000 9 8.86000000000000 2 1.25000000000000 1.28000000000000 0.460000000000000 1 0.670000000000000 13.6300000000000 5.33000000000000 4;0.0540000000000000 0.00600000000000000 0.00500000000000000 0.0180000000000000 0.0150000000000000 0.113000000000000 0.731000000000000 0.142000000000000 0.107000000000000 0.0240000000000000 0.0660000000000000 0.00300000000000000 0.220000000000000 0.0270000000000000 0.0160000000000000 0.0520000000000000 0.0400000000000000 0.00400000000000000 0.0100000000000000 0.0160000000000000 0.0590000000000000 0.0150000000000000 0.116000000000000;0.00470000000000000 0.000100000000000000 0.000400000000000000 0.00190000000000000 0.00110000000000000 0 0.000400000000000000 0.00350000000000000 0.00240000000000000 0 0.00140000000000000 0.00150000000000000 0.00400000000000000 0.00210000000000000 0.000800000000000000 0.000800000000000000 0.000500000000000000 0 0.000400000000000000 0.000400000000000000 0.00200000000000000 0.00110000000000000 0.00360000000000000];
B1=[B65;enke];
pogoj=-[2000;310;50;1;0.018;-20];
mimimum=-[6.1;0.17;12;20;17.99;3.25;27.8;3.64;3.35;81.11;25.1;0.21;33;0.54;0;0.2;0.1;0;0;0.3;15.31;0.54;16];


[mase_b,min_mascobe]=linprog(mimimum,B1,pogoj,[],[],[],test_lb);
fprintf('----------2.naloga----------\n masni vektor:');
%disp(mase_b);
fprintf('masa:%f\n',sum(mase_b));

fprintf('1.stoplec-MIN-mascobe:\t%f\n',min_mascobe);
min_mascobe=mimimum'*mase_b;
fprintf('1.stoplec-MIN-mascobe:\t%f\n',min_mascobe);


kalorije=B1(1,:)*mase_b;
fprintf('1.stoplec-kalorije:\t%f\n',kalorije);

kalorije=B1(2,:)*mase_b;
fprintf('1.stoplec-oh:\t%f\n',kalorije);

kalorije=B1(3,:)*mase_b;
fprintf('1.stoplec-proteini:\t%f\n',kalorije);
kalorije=B1(4,:)*mase_b;
fprintf('1.stoplec-ca:\t%f\n',kalorije);

kalorije=B1(5,:)*mase_b;
fprintf('1.stoplec-fe:\t%f\n',kalorije);

fprintf('rezultati so ok, total mascobe =0, saj grozdje, pesa, in pivo in ostali imajo 0g mascob');

%--------------------------------3 naloga----------------------------------
%3 naloga-   Ker resujemo poenostavljen problem s samo 5 parametri na zivilo, so lahko rezultati nerealisticni.
%Lahko z omejitvijo kolicine posameznih zivil v obroku izboljsas uravnoveženost prehrane?



%primer, ko smo omejili vsako zivilo na max 1=100g



test_lb=zeros(23,1);
test_ub=-ones(23,1);

test_A222=[6.1,64,15.,0.054,0.0047;0.17,13.81,0.26,0.006,0.00012;12,21.55,1.96,0.005,0.00035;20,0,17.17,0.018,0.00194;17.99,0,17.18,0.015,0.00105;3.25,4.52,3.22,0.113,0.00005;27.8,1.43,24.9900000000000 0.731000000000000 0.000440000000000000;3.64000000000000 47.5100000000000 10.9100000000000 0.142000000000000 0.00346000000000000;3.35000000000000 41.2900000000000 12.9500000000000 0.107000000000000 0.00243000000000000;81.1100000000000 0.0600000000000000 0.850000000000000 0.0240000000000000 2.00000000000000e-05;25.1000000000000 0 18.5000000000000 0.0660000000000000 0.00140000000000000;0.210000000000000 28.5900000000000 2.38000000000000 0.00300000000000000 0.00149000000000000;33 55 9 0.220000000000000 0.00400000000000000;0.540000000000000 23.7100000000000 8.86000000000000 0.0270000000000000 0.00210000000000000;0 8 2 0.0160000000000000 0.000790000000000000;0.200000000000000 3.35000000000000 1.25000000000000 0.0520000000000000 0.000830000000000000;0.100000000000000 5.80000000000000 1.28000000000000 0.0400000000000000 0.000470000000000000;0 3.55000000000000 0.460000000000000 0.00400000000000000 2.00000000000000e-05;0 18 1 0.0100000000000000 0.000400000000000000;0.300000000000000 7.68000000000000 0.670000000000000 0.0160000000000000 0.000410000000000000;15.3100000000000 0.880000000000000 13.6300000000000 0.0590000000000000 0.00198000000000000;0.540000000000000 26.5400000000000 5.33000000000000 0.0150000000000000 0.00106000000000000;16 60 4 0.116000000000000 0.00360000000000000;]';
test_A=[test_A222;enke];

test_b=-[70;310;50;1;0.018;-20];
test_f=-[369;52;93;254;236;60;357;266;247;717;305;130;563;132;37;17;25;43;69;32;196;124;399];


mase_4=linprog(test_f,test_A,test_b,[],[],test_ub,test_lb);

masa=sum(mase_4);
%disp(v)
fprintf('-----------3.naloga-----------------------\n Omejili maso na max 1=100g\nmasa:%f',masa);

min=test_f'*mase_4;
fprintf('\nzauzite kalorije:\t %f\n',min);

mascobe=test_A(1,:)*mase_4;
fprintf('1.stoplec-mascob:\t%f\n',mascobe);

mascobe=test_A(2,:)*mase_4;
fprintf('2.stoplec-co:\t%f\n',mascobe);

mascobe=test_A(3,:)*mase_4;
fprintf('proteini:\t%f\n',mascobe);

mascobe=test_A(4,:)*mase_4;
fprintf('kalcij:\t%f\n',mascobe);

mascobe=test_A(5,:)*mase_4;
fprintf('zelezo:\t%f\n',mascobe);



%70 g mascob, 310 g ogljikovih hidratov, 50 g proteinov, 1000 mg kalcija ter 18 mg zeleza.

%----------------------------------3b
%naloga---------------------------------
enke=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];


prvi=[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
drugi=[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
tretji=[0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0];

cetrti=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0];
peti=[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0];




sesti=[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0];

sedmi=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0];
osmi=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0];


test_lb=zeros(23,1);
test_ub=-ones(23,1);

test_A2=[6.1,64,15.,0.054,0.0047;0.17,13.81,0.26,0.006,0.00012;12,21.55,1.96,0.005,0.00035;20,0,17.17,0.018,0.00194;17.99,0,17.18,0.015,0.00105;3.25,4.52,3.22,0.113,0.00005;27.8,1.43,24.9900000000000 0.731000000000000 0.000440000000000000;3.64000000000000 47.5100000000000 10.9100000000000 0.142000000000000 0.00346000000000000;3.35000000000000 41.2900000000000 12.9500000000000 0.107000000000000 0.00243000000000000;81.1100000000000 0.0600000000000000 0.850000000000000 0.0240000000000000 2.00000000000000e-05;25.1000000000000 0 18.5000000000000 0.0660000000000000 0.00140000000000000;0.210000000000000 28.5900000000000 2.38000000000000 0.00300000000000000 0.00149000000000000;33 55 9 0.220000000000000 0.00400000000000000;0.540000000000000 23.7100000000000 8.86000000000000 0.0270000000000000 0.00210000000000000;0 8 2 0.0160000000000000 0.000790000000000000;0.200000000000000 3.35000000000000 1.25000000000000 0.0520000000000000 0.000830000000000000;0.100000000000000 5.80000000000000 1.28000000000000 0.0400000000000000 0.000470000000000000;0 3.55000000000000 0.460000000000000 0.00400000000000000 2.00000000000000e-05;0 18 1 0.0100000000000000 0.000400000000000000;0.300000000000000 7.68000000000000 0.670000000000000 0.0160000000000000 0.000410000000000000;15.3100000000000 0.880000000000000 13.6300000000000 0.0590000000000000 0.00198000000000000;0.540000000000000 26.5400000000000 5.33000000000000 0.0150000000000000 0.00106000000000000;16 60 4 0.116000000000000 0.00360000000000000;]';

test_A=[test_A2;prvi;drugi;tretji;cetrti;peti;sesti;sedmi;osmi];
test_b=-[70;310;50;1;0.018;0;0;0;0;0;0;0;0];
test_f=-[369;52;93;254;236;60;357;266;247;717;305;130;563;132;37;17;25;43;69;32;196;124;399];


najzdrave=linprog(test_f,test_A,test_b,[],[],test_ub,test_lb);

masa=sum(najzdrave);
%disp(v)
fprintf('-----------3b.naloga-----------------------\n Omejili se samo na "nezdrave"\nNI SPREMEMBE--nekaj novega bo treba!!!!!!!!!!!!!!!!\nmasa:%f',masa);

min=test_f'*najzdrave;
fprintf('\nzauzite kalorije:\t %f\n',min);

mascobe=test_A(1,:)*najzdrave;
fprintf('1.stoplec-mascob:\t%f\n',mascobe);

mascobe=test_A(2,:)*najzdrave;
fprintf('2.stoplec-co:\t%f\n',mascobe);

mascobe=test_A(3,:)*najzdrave;
fprintf('proteini:\t%f\n',mascobe);

mascobe=test_A(4,:)*najzdrave;
fprintf('kalcij:\t%f\n',mascobe);

mascobe=test_A(5,:)*najzdrave;
fprintf('zelezo:\t%f\n',mascobe);


%--------------------------3.c naloga---------------------------
%omejevanje po prehranski piramidi
fprintf('-----------prehranska piramida-----------------------\n');

prvi_pogoj=[1,1,0,0,0,0,0,1,1,0,0,1,0,1,1,1,1,0,1,1,0,1,0];
drugi_pogoj=[0,0,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,1,0,0];

test_lb=zeros(23,1);


test_A=[369 52 93 254 236 60 357 266 247 717 305 130 563 132 37 17 25 43 69 32 196 124 399;64 13.8100000000000 21.5500000000000 0 0 4.52000000000000 1.43000000000000 47.5100000000000 41.2900000000000 0.0600000000000000 0 28.5900000000000 55 23.7100000000000 8 3.35000000000000 5.80000000000000 3.55000000000000 18 7.68000000000000 0.880000000000000 26.5400000000000 60;15.5000000000000 0.260000000000000 1.96000000000000 17.1700000000000 17.1800000000000 3.22000000000000 24.9900000000000 10.9100000000000 12.9500000000000 0.850000000000000 18.5000000000000 2.38000000000000 9 8.86000000000000 2 1.25000000000000 1.28000000000000 0.460000000000000 1 0.670000000000000 13.6300000000000 5.33000000000000 4;0.0540000000000000 0.00600000000000000 0.00500000000000000 0.0180000000000000 0.0150000000000000 0.113000000000000 0.731000000000000 0.142000000000000 0.107000000000000 0.0240000000000000 0.0660000000000000 0.00300000000000000 0.220000000000000 0.0270000000000000 0.0160000000000000 0.0520000000000000 0.0400000000000000 0.00400000000000000 0.0100000000000000 0.0160000000000000 0.0590000000000000 0.0150000000000000 0.116000000000000;0.00470000000000000 0.000100000000000000 0.000400000000000000 0.00190000000000000 0.00110000000000000 0 0.000400000000000000 0.00350000000000000 0.00240000000000000 0 0.00140000000000000 0.00150000000000000 0.00400000000000000 0.00210000000000000 0.000800000000000000 0.000800000000000000 0.000500000000000000 0 0.000400000000000000 0.000400000000000000 0.00200000000000000 0.00110000000000000 0.00360000000000000];
test_A5=[test_A;prvi_pogoj;drugi_pogoj];




test_b=-[2000;310;50;1;0.018;-15;-5];
test_f=-[6.1;0.17;12;20;17.99;3.25;27.8;3.64;3.35;81.11;25.1;0.21;33;0.54;0;0.2;0.1;0;0;0.3;15.31;0.54;16];


ideal=linprog(test_f,test_A5,test_b,[],[],[],test_lb);

masa=sum(ideal);
%disp(v)
fprintf('masa:%f',masa);

min=test_f'*ideal;
fprintf('\nZauzite kalorije:\t %f\n',min);

mascobe=test_A5(1,:)*ideal;
fprintf('1.stoplec-mascob:\t%f\n',mascobe);

mascobe=test_A5(2,:)*ideal;
fprintf('2.stoplec-co:\t%f\n',mascobe);

mascobe=test_A5(3,:)*ideal;
fprintf('proteini:\t%f\n',mascobe);

mascobe=test_A5(4,:)*ideal;
fprintf('kalcij:\t%f\n',mascobe);

mascobe=test_A5(5,:)*ideal;
fprintf('zelezo:\t%f\n',mascobe);

masa=test_A5(6,:)*ideal;
fprintf('masa prve skupine, pogoj:\t%f\n',masa);


masa=test_A5(7,:)*ideal;
fprintf('masa druge skupine, pogoj:\t%f\n',masa);

%70 g mascob, 310 g ogljikovih hidratov, 50 g proteinov, 1000 mg kalcija ter 18 mg zeleza.




%-----------------------------4. naloga-DODATNA---------------

fprintf('------------------4naloga-----NAJCENEJE--------------\n');

matrika1=[369 6.10000000000000 64 15.5000000000000 0.0540000000000000 0.00470000000000000;52 0.170000000000000 13.8100000000000 0.260000000000000 0.00600000000000000 0.000120000000000000;93 12 21.5500000000000 1.96000000000000 0.00500000000000000 0.000350000000000000;254 20 0 17.1700000000000 0.0180000000000000 0.00194000000000000;236 17.9900000000000 0 17.1800000000000 0.0150000000000000 0.00105000000000000;60 3.25000000000000 4.52000000000000 3.22000000000000 0.113000000000000 3.00000000000000e-05;357 27.8000000000000 1.43000000000000 24.9900000000000 0.731000000000000 0.000440000000000000;266 3.64000000000000 47.5100000000000 10.9100000000000 0.142000000000000 0.00346000000000000;247 3.35000000000000 41.2900000000000 12.9500000000000 0.107000000000000 0.00243000000000000;717 81.1100000000000 0.0600000000000000 0.850000000000000 0.0240000000000000 2.00000000000000e-05;305 25.1000000000000 0 18.5000000000000 0.0660000000000000 0.00140000000000000;130 0.210000000000000 28.5900000000000 2.38000000000000 0.00300000000000000 0.00149000000000000;563 33 55 9 0.220000000000000 0.00400000000000000;132 0.540000000000000 23.7100000000000 8.86000000000000 0.0270000000000000 0.00210000000000000;37 0 8 2 0.0160000000000000 0.000790000000000000;17 0.200000000000000 3.35000000000000 1.25000000000000 0.0520000000000000 0.000830000000000000;25 0.100000000000000 5.80000000000000 1.28000000000000 0.0400000000000000 0.000470000000000000;43 0 3.55000000000000 0.460000000000000 0.00400000000000000 2.00000000000000e-05;69 0 18 1 0.0100000000000000 0.000400000000000000;32 0.300000000000000 7.68000000000000 0.670000000000000 0.0160000000000000 0.000410000000000000;196 15.3100000000000 0.880000000000000 13.6300000000000 0.0590000000000000 0.00198000000000000;124 0.540000000000000 26.5400000000000 5.33000000000000 0.0150000000000000 0.00106000000000000;399 16 60 4 0.116000000000000 0.00360000000000000]';
minimalka=-[0.200000000000000;0.100000000000000;0.100000000000000;0.500000000000000;0.500000000000000;0.100000000000000;0.700000000000000;0.150000000000000;0.250000000000000;0.500000000000000;0.600000000000000;0.300000000000000;1;0.350000000000000;0.0700000000000000;0.100000000000000;0.0600000000000000;0.400000000000000;0.200000000000000;0.700000000000000;2.50000000000000;0.250000000000000;0.940000000000000];
ub=-1*ones(23,1);
matrika=[matrika1;enke];

pogoj=-[2000;70;310;50;1;0.018;-20];

[najceneje,cena]=linprog(minimalka,matrika,pogoj,[],[],ub,test_lb);

fprintf('najceneje: %f\n',cena);


cena=minimalka'*najceneje;
fprintf('najceneje: %f\n',cena);


fprintf('masa:\t%f\n',sum(najceneje));

masa=matrika(1,:)*najceneje;
fprintf('kalorije:\t%f\n',masa);

masa=matrika(2,:)*najceneje;
fprintf('mascoba:\t%f\n',masa);

masa=matrika(3,:)*najceneje;
fprintf('OH:\t%f\n',masa);
masa=matrika(4,:)*najceneje;
fprintf('proteini:\t%f\n',masa);


masa=matrika(5,:)*najceneje;
fprintf('kalcij:\t%f\n',masa);


masa=matrika(6,:)*najceneje;
fprintf('zelezo:\t%f\n',masa);
